(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>n});var t=s(5155),a=s(2115);function n(){var e;let[l,s]=(0,a.useState)(null),[n,c]=(0,a.useState)(null),[o,r]=(0,a.useState)(!1),[i,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),p=async()=>{let e={id:"conv-00"+((null==n?void 0:n.length)+1),name:u,messages:[{role:"user",content:"How to learn Blockchain"},{role:"encoraChat",content:"I have a routemap with 3 weeks for your lean Blockchain from zero."}]},l=await fetch("/chats",{method:"POST",headers:{"Content-Type":"application/json"},body:e?JSON.stringify(e):null}),s=await l.json();c([...n,e]),r(!0),d(e),console.log("user created",e,s)},j=async()=>{x(""),console.log(i,m);let e=[{role:"user",content:m},{role:"encoraChat",content:"This is a simulated response from EncoraChat."}];i.messages=[...i.messages,...e]},f=async()=>{let e=await fetch("/api/whoami");s((await e.json()).data)},g=async()=>{let e=await fetch("/chats"),l=await e.json();c(l.data),console.log(l.data)};return(0,a.useEffect)(()=>{f(),g()},[]),(0,t.jsxs)("div",{className:"font-sans flex justify-items-center h-screen",children:[(0,t.jsx)("section",{className:"left p-4",children:(0,t.jsxs)("div",{className:"logo",children:[(0,t.jsx)("h2",{className:"pb-30",children:"EncoraChat"}),(0,t.jsx)("h3",{className:"pb-10 cursor-pointer",onClick:()=>{r(!1),h("")},children:"Nuevo Chat"}),(0,t.jsx)("p",{className:"pb-5",children:"Chats"}),(0,t.jsx)("ul",{children:null==n?void 0:n.map((e,l)=>(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("a",{onClick:()=>{console.log(n,e),d(e),r(!0)},className:"cursor-pointer",children:e.name}),(0,t.jsx)("div",{onClick:()=>{c(null==n?void 0:n.filter(l=>l.id!==e.id)),(null==i?void 0:i.id)===e.id&&(r(!1),d(null))},children:"x"})]},l))}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar en historial",className:"rounded-xl mt-20 w-80 p-2 border",onChange:e=>{if(console.log(n),""===e.target.value)c(n);else{let l=e.target.value.toLowerCase();c(n.filter(e=>e.name.toLowerCase().includes(l)))}}})]})}),(0,t.jsx)("section",{className:"right p-4",children:(0,t.jsx)("div",{className:"chat text-center",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mb-15",children:null==i?void 0:i.name}),(0,t.jsx)("ul",{id:"chatSelected",className:"text-left chat-selected",children:null==i||null==(e=i.messages)?void 0:e.map((e,l)=>(0,t.jsx)("li",{className:"mb-5",children:e.content},l))}),(0,t.jsx)("div",{className:"buscador mb-20 fixed bottom-0",children:(0,t.jsx)("input",{className:"flex justify-center items-center border rounded-xl mt-4 w-100 p-2",placeholder:"Escribe algo",type:"text",onKeyDown:e=>{if("Enter"==e.key){j();let e=document.getElementById("chatSelected"),l=null;l=setInterval(function(){e.scrollTop=e.scrollHeight,clearInterval(l)},1)}},onChange:e=>{x(e.target.value)},value:m})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"text-xl",children:"\xbfQu\xe9 tienes en mente hoy?"}),(0,t.jsx)("div",{className:"buscador mb-20 ",children:(0,t.jsx)("input",{className:"flex justify-center items-center border rounded-xl mt-4 w-100 p-2",placeholder:"Escribe algo",type:"text",onKeyDown:e=>{"Enter"==e.key&&p()},onChange:e=>{h(e.target.value)},value:u})})]})})})]})}},9822:(e,l,s)=>{Promise.resolve().then(s.bind(s,3792))}},e=>{e.O(0,[441,964,358],()=>e(e.s=9822)),_N_E=e.O()}]);